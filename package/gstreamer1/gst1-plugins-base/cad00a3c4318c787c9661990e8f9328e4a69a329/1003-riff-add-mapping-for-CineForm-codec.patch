From fdd25a533e6e112f91eafabcd7caf35154389a55 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Tim-Philipp=20M=C3=BCller?= <tim@centricular.com>
Date: Tue, 8 Oct 2019 19:35:23 +0100
Subject: [PATCH 1003/1024] riff: add mapping for CineForm codec

Makes CineForm-in-AVI work.
---
 gst-libs/gst/riff/riff-media.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/gst-libs/gst/riff/riff-media.c b/gst-libs/gst/riff/riff-media.c
index 2d6aa55d8..6972eb81c 100644
--- a/gst-libs/gst/riff/riff-media.c
+++ b/gst-libs/gst/riff/riff-media.c
@@ -509,6 +509,12 @@ gst_riff_create_video_caps (guint32 codec_fcc,
         *codec_name = g_strdup ("Microsoft MPEG-4 4.3");        /* FIXME? */
       break;
 
+    case GST_MAKE_FOURCC ('C', 'F', 'H', 'D'):
+      caps = gst_caps_new_empty_simple ("video/x-cineform");
+      if (codec_name)
+        *codec_name = g_strdup ("CineForm");
+      break;
+
     case GST_MAKE_FOURCC ('D', 'V', 'S', 'D'):
     case GST_MAKE_FOURCC ('d', 'v', 's', 'd'):
     case GST_MAKE_FOURCC ('d', 'v', 'c', ' '):
@@ -1864,6 +1870,7 @@ gst_riff_create_video_template_caps (void)
     GST_MAKE_FOURCC ('3', 'I', 'V', '1'),
     GST_MAKE_FOURCC ('A', 'S', 'V', '1'),
     GST_MAKE_FOURCC ('A', 'S', 'V', '2'),
+    GST_MAKE_FOURCC ('C', 'F', 'H', 'D'),
     GST_MAKE_FOURCC ('C', 'L', 'J', 'R'),
     GST_MAKE_FOURCC ('C', 'S', 'C', 'D'),
     GST_MAKE_FOURCC ('C', 'Y', 'U', 'V'),
-- 
2.17.1

